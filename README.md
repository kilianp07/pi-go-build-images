# Pi Go Build Images

[![Docker Image CI](https://github.com/kilianp07/pi-go-build-images/actions/workflows/publish-release.yml/badge.svg)](https://github.com/kilianp07/pi-go-build-images/actions)

## Overview

`Pi Go Build Images` is a collection of Docker images designed for cross-compiling Go applications for Raspberry Pi devices. These images support multiple architectures (`arm64`, `armv7`) and are based on the Raspberry Pi OS versions `Bullseye` and `Bookworm`.

## Supported Images

The following Docker images are generated by this repository:

- **Bullseye (arm64)**: `ghcr.io/kilianp07/pi-go-build-images:bullseye-arm64-<version>`
- **Bullseye (armv7)**: `ghcr.io/kilianp07/pi-go-build-images:bullseye-armv7-<version>`
- **Bookworm (arm64)**: `ghcr.io/kilianp07/pi-go-build-images:bookworm-arm64-<version>`
- **Bookworm (armv7)**: `ghcr.io/kilianp07/pi-go-build-images:bookworm-armv7-<version>`

Each image is tagged with the corresponding OS version, architecture, and release version.

## Tagging and Go Version

The Docker images published in this repository are tagged according to the version of Go used within the images.

### Example

If a new version of Go is released, such as `1.23.0`, and I update the Dockerfiles to use this version, the resulting Docker images will be tagged like this:

- **Bullseye (arm64)**: `ghcr.io/kilianp07/pi-go-build-images:bullseye-arm64-v1.23.0`
- **Bullseye (armv7)**: `ghcr.io/kilianp07/pi-go-build-images:bullseye-armv7-v1.23.0`
- **Bookworm (arm64)**: `ghcr.io/kilianp07/pi-go-build-images:bookworm-arm64-v1.23.0`
- **Bookworm (armv7)**: `ghcr.io/kilianp07/pi-go-build-images:bookworm-armv7-v1.23.0`

### Why This Matters

By tying the Docker image tags to the Go version:

- **Version Clarity**: Itâ€™s easy for users to identify which version of Go is included in each Docker image.
- **Consistency**: This ensures that the Go version used in your Docker images matches the version you intend to use in your development and CI/CD environments.

## Usage

### Pulling the Images

You can pull any of the Docker images using the following commands:

```bash
# Pull Bullseye arm64 image
docker pull ghcr.io/kilianp07/pi-go-build-images:bullseye-arm64-<version>

# Pull Bullseye armv7 image
docker pull ghcr.io/kilianp07/pi-go-build-images:bullseye-armv7-<version>

# Pull Bookworm arm64 image
docker pull ghcr.io/kilianp07/pi-go-build-images:bookworm-arm64-<version>

# Pull Bookworm armv7 image
docker pull ghcr.io/kilianp07/pi-go-build-images:bookworm-armv7-<version>
```

### Building Go Applications

To build a Go application using these images, you can use the following Docker commands. Replace `<path_to_your_go_project>` with the path to your Go project and adjust the output binary path as needed.

```bash
# Build for Bullseye arm64
docker run --rm -v <path_to_your_go_project>:/go/src/app -w /go/src/app ghcr.io/kilianp07/pi-go-build-images:bullseye-arm64-<version> go build -o ./build/raspberry/yourapp

# Build for Bullseye armv7
docker run --rm -v <path_to_your_go_project>:/go/src/app -w /go/src/app ghcr.io/kilianp07/pi-go-build-images:bullseye-armv7-<version> go build -o ./build/raspberry/yourapp

# Build for Bookworm arm64
docker run --rm -v <path_to_your_go_project>:/go/src/app -w /go/src/app ghcr.io/kilianp07/pi-go-build-images:bookworm-arm64-<version> go build -o ./build/raspberry/yourapp

# Build for Bookworm armv7
docker run --rm -v <path_to_your_go_project>:/go/src/app -w /go/src/app ghcr.io/kilianp07/pi-go-build-images:bookworm-armv7-<version> go build -o ./build/raspberry/yourapp
```

### Example Usage

Assume you have a Go project located in `~/projects/my-go-app`. You can build the project for a Raspberry Pi running Bookworm with an ARMv7 architecture and with CGO like this:

```bash
docker run --rm \
  -v ~/projects/my-go-app:/go/src/app \
  -w /go/src/app \
  -e CGO_ENABLED=1 \
  ghcr.io/kilianp07/pi-go-build-images:bookworm-armv7-v1.23.0 \
  go build -o ./build/raspberry/my-go-app

```

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## Contact

If you have any questions, feel free to open an issue.